<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <!-- Module Menu -->
        <menuitem id="main_carrent_menu" name="Car Rental"/>

        <menuitem id="folio_menu" name="Folio" parent="main_carrent_menu" sequence="200"/>
        <menuitem id="config_menu" name="Configuration" parent="main_carrent_menu" sequence="700"/>
        <menuitem id="vehicle_menu" name="Vehicle" parent="config_menu" sequence="701"/>
        <menuitem id="amenity_menu" name="Amenity" parent="config_menu" sequence="702"/>


        <!-- ============ INHERIT PRODUCT ================ -->
        <record id="view_product_template_form_inherited" model="ir.ui.view">
            <field name="name">view.product.template.form.inherited</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='active']" position="after">
                    <field name="isvehicle" readonly="1"/>
                </xpath>
            </field>
        </record>

        <!-- ============ COMPANY CONFIGURATION ================ -->
        <record id="res_company_inherit_config_carrent" model="ir.ui.view">
            <field name="name">res.company.inherit.config.carrent</field>
            <field name="model">res.company</field>
            <field name="inherit_id" ref="base.view_company_form" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='currency_id']" position="after">
                    <field name="additional_hours"/>
                </xpath>
            </field>
        </record>

        <!-- ============= BRAND =================== -->
        <record model="ir.ui.view" id="dtbs_brand_tree_view">
            <field name="name">dtbs.brand.tree</field>
            <field name="model">dtbs.carrent.brand</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="dtbs_brand_tree" toolbar="1">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_brand_form_view">
            <field name="name">dtbs.brand.form</field>
            <field name="model">dtbs.carrent.brand</field>
            <field name="arch" type="xml">
                <form string="Car Brand">
                    <sheet>
                        <group>
                            <field name="name"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_brand_search_view">
            <field name="name">dtbs.brand.search</field>
            <field name="model">dtbs.carrent.brand</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="dtbs_brand_list_action">
            <field name="name">Brand</field>
            <field name="res_model">dtbs.carrent.brand</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">Create new brand here
                </p>
            </field>
        </record>

        <menuitem id="brand_menu" name="Vehicle Brand" parent="vehicle_menu"
                  sequence="1"
                  action="dtbs_brand_list_action"/>


        <!-- ============= COLOR =================== -->
        <record model="ir.ui.view" id="dtbs_color_tree_view">
            <field name="name">dtbs.color.tree</field>
            <field name="model">dtbs.carrent.color</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="dtbs_color_tree" toolbar="1">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_color_form_view">
            <field name="name">dtbs.color.form</field>
            <field name="model">dtbs.carrent.color</field>
            <field name="arch" type="xml">
                <form string="Car Color">
                    <sheet>
                        <group>
                            <field name="name"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_color_search_view">
            <field name="name">dtbs.color.search</field>
            <field name="model">dtbs.carrent.color</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="dtbs_color_list_action">
            <field name="name">Color</field>
            <field name="res_model">dtbs.carrent.color</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">Create new color here
                </p>
            </field>
        </record>

        <menuitem id="color_menu" name="Vehicle Color" parent="vehicle_menu"
                  sequence="2"
                  action="dtbs_color_list_action"/>


		<!-- =========== CATEGORY ================ -->
        <record model="ir.ui.view" id="dtbs_category_form_view">
            <field name="name">dtbs.category.form</field>
			<field name="model">dtbs.carrent.category</field>
			<field name="arch" type="xml">
				<form string="Vehicle Category" >
					<sheet>
						<group>
							<field name="name" select="1"/>
                            <field name="parent_id" domain="[('isvehiclecat','=',True)]" select="1"/>
                            <field name="isvehiclecat" invisible="1"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


        <record model="ir.ui.view" id="dtbs_category_tree_view">
            <field name="name">dtbs.category.tree</field>
            <field name="model">dtbs.carrent.category</field>
            <field name="arch" type="xml">
                <tree string="Vehicle Category">
                    <field name="name"/>
                </tree>
            </field>
        </record>


        <record model="ir.actions.act_window" id="dtbs_category_list_action">
            <field name="name">Category</field>
            <field name="res_model">dtbs.carrent.category</field>
            <field name="view_type">form</field>
            <field name="context">{'default_isvehiclecat':1}</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="category_menu" name="Vehicle Category" parent="vehicle_menu"
                  sequence="3"
                  action="dtbs_category_list_action"/>


        
        <!-- =========== VEHICLE BY CATEGORY ================= -->
        <record model="ir.actions.act_window" id="dtbs_vehicle_category_action">
            <field name="name">Vehicle by Category</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.category</field>
            <field name="domain">[('parent_id','=',False),('isvehiclecat','=',True)]</field>
            <field name="view_type">tree</field>
            <field name="view_id" ref="product.product_category_tree_view"/>
        </record>

        <menuitem id="vehicle_by_category_menu" name="Vehicle by Category" parent="vehicle_menu"
                  sequence="4"
                  action="dtbs_vehicle_category_action"/>


        <!-- ================= AMENITY ==================== -->
        <record model="ir.ui.view" id="dtbs_facility_tree_view">
            <field name="name">dtbs.facility.tree</field>
            <field name="model">dtbs.carrent.facility</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="dtbs_facility_tree" toolbar="1">
                    <field name="name"/>
                    <field name="desc"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_facility_form_view">
            <field name="name">dtbs.facility.form</field>
            <field name="model">dtbs.carrent.facility</field>
            <field name="arch" type="xml">
                <form string="Facility">
                    <sheet>
                        <group>
                            <field name="name"/>
                            <field name="desc"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_facility_search_view">
            <field name="name">dtbs.facility.search</field>
            <field name="model">dtbs.carrent.facility</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="desc"/>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="dtbs_facility_list_action">
            <field name="name">Facility</field>
            <field name="res_model">dtbs.carrent.facility</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">Create new facility here
                </p>
            </field>
        </record>

        <menuitem id="facility_menu" name="Facility" parent="amenity_menu"
                  sequence="1"
                  action="dtbs_facility_list_action"/>        


        <!-- ======================= UNIT ================== -->
        <record model="ir.ui.view" id="dtbs_unit_form_view">
            <field name="name">dtbs.unit.form</field>
            <field name="model">dtbs.carrent.unit</field>
            <field name="arch" type="xml">
                <form string="Vehicle" >
                    <header>
                        <field name="status" string="Vehicle Status" widget='statusbar'/>
                    </header>
                    <sheet>
                        <field name="image_medium" widget="image" class="oe_avatar oe_right"/>
                        <div class="oe_title">
                            <label for="name" string="Name" />
                            <h1>
                                <field name="name" />
                            </h1>
                            <label for="code" string="Code" />
                            <h2>
                                <field name="code" />
                            </h2>
                            <!-- <label for="status" string="Status"/>
                            <h3>
                                <field name="status" />
                            </h3>-->
                            <h3>
                                <field name="isvehicle" readonly="1"/>
                            </h3>
                        </div>
                        <group>
                            <group>
                                <field name="categ_id"/>
                                <field name="brand_id"/>
                                <field name="color"/>
                                <field name="year"/>
                                <field name="capacity"/>
                            </group>
                            <group>
                                <field name="police"/>
                                <field name="chassis"/>
                                <field name="engine"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Information">
                                <group colspan="4" col="4">
                                    <field name="product_manager" select="2" string="Unit Manager"/>
                                    <field name="uom_id" invisible="1"/>
                                </group>
                                <newline/>
                                <separator colspan='4' string="Customer Taxes"/>
                                <field name="taxes_id" colspan="4" nolabel='1' help='Customer taxes apply on the perticular unit. '/>
                            </page>
                            <page string="Procurement">
                                <group colspan="4" col="4">
                                    <field name="active" select="2"/>
                                    <field name="rental" select="2"/>
                                    <field name="cost_method"/>    
                                    <field name="uos_coeff" /> 
                                    <field name="list_price" /> 
                                    <newline/> 
                                </group>
                                <newline/> 
                            </page>
                            <page string="Description">
                                <field name="desc"/>
                            </page>
                            <page string="Facility">
                                <field name="facility_ids"/>
                            </page>
                            <page string="Maintenance">
                                <group>
                                    <field name="stnk"/>
                                    <field name="engine_oil"/>
                                    <field name="service"/>
                                </group>
                            </page>
                            <page string = "Folio Unit Reservations">
                                <separator colspan='4' string="Folio Unit Reservation Line" />
                                <field name="unit_line_ids" colspan="4" nolabel='1' >
                                    <form string="Unit line" >
                                        <group colspan='4' col='4'>
                                            <field name="name"/>
                                            <field name="check_in"/>
                                            <field name="check_out"/>
                                            <field name="folio_id" />
                                            <field name="status"/>
                                        </group>
                                    </form>
                                    <tree>
                                        <field name="name"/>
                                        <field name="check_in"/>
                                        <field name="check_out"/>
                                        <field name="folio_id" />
                                        <field name="status"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_unit_tree_view">
            <field name="name">dtbs.unit.tree</field>
            <field name="model">dtbs.carrent.unit</field>
            <field name="arch" type="xml">
                <tree string="Vehicle">
                    <field name="code"/>
                    <field name="name"/>
                    <field name="police"/>
                    <field name="categ_id"/>
                    <field name="brand_id"/>
                    <field name="color"/>
                    <field name="capacity"/>
                    <field name="status"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_unit_kanban_view">
            <field name="name">dtbs.unit.kanban</field>
            <field name="model">dtbs.carrent.unit</field>
            <field name="arch" type="xml">
                <kanban default_group_by="status">
                    <field name="name" />
                    <field name="status" />
                     <field name="kanban_color"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_color_{{kanban_getcolor(record.kanban_color.raw_value)}}
                                                  oe_kanban_global_click_edit oe_semantic_html_override
                                                  oe_kanban_card {{record.group_fancy==1 ? 'oe_kanban_card_fancy' : ''}}">
                                <a type="open"><img t-att-src="kanban_image('dtbs.carrent.unit', 'image_small', record.id.value)" class="oe_kanban_image"/></a>
                                <div class="oe_dropdown_kanban">
                                    <!-- dropdown menu -->
                                    <div class="oe_dropdown_toggle">
                                        <span class="oe_e">#</span>
                                        <ul class="oe_dropdown_menu">
                                            <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Edit</a></li></t>
                                            <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                            <li>
                                                <ul class="oe_kanban_colorpicker" data-field="kanban_color"/>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="oe_clear"></div>
                                </div>
                                <div t-attf-class="oe_kanban_content">
                                    <h4>
                                        <a type="open">
                                            <field name="name"/>
                                        </a>
                                    </h4>
                                    <div name="tags"/>
                                    <ul>
                                        <li><b>Status: </b><field name="status"></field></li>
                                        <li><b>Capacity: </b><field name="capacity"></field></li>
                                        <li>
                                            <a t-if="record.status.raw_value === 'available'" type="object" string="Available" name="set_vehicle_status_occupied" class="oe_kanban_status oe_kanban_status_green "> </a>
                                            <a t-if="record.status.raw_value === 'occupied'" type="object" string="occupied" name="set_vehicle_status_available" class="oe_kanban_status oe_kanban_status_red "> </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_unit_search_view">
            <field name="name">dtbs.unit.search</field>
            <field name="model">dtbs.carrent.unit</field>
            <field name="arch" type="xml">
                <search>
                    <field name="code"/>
                    <field name="name"/>
                    <field name="police"/>
                    <field name="categ_id"/>
                    <field name="brand_id"/>
                    <field name="color"/>
                    <field name="chassis"/>
                    <field name="engine"/>
                    <field name="year"/>
                    <field name="capacity"/>
                    <field name="status"/>
                </search>
            </field>
        </record>        

        <record model="ir.actions.act_window" id="dtbs_unit_list_action">
            <field name="name">Vehicle</field>
            <field name="res_model">dtbs.carrent.unit</field>
            <field name="view_type">form</field>
            <field name="context">{'default_isvehicle':1}</field>
            <field name="view_mode">kanban,tree,form</field>
        </record>

        <menuitem id="unit_menu" name="Vehicle" parent="vehicle_menu"
                  sequence="5"
                  action="dtbs_unit_list_action"/>

        
        <!-- ============ FOLIO ================ -->
        <record model="ir.ui.view" id="dtbs_carrent_folio_form_view">
            <field name="name">dtbs.carrent.folio.form</field>
            <field name="model">dtbs.carrent.folio</field>
            <field name="arch" type="xml">
                <form string="Folio">
                    <header>
                        <button name="order_confirm" string="Confirm Folio" states="draft" icon="gtk-apply" class="oe_highlight"/>
                        <button name="invoice_recreate" string="Recreate Invoice" states="invoice_except" icon="gtk-redo" class="oe_highlight"/>
                        <button name="invoice_corrected" string="Invoice Corrected" states="invoice_except" icon="gtk-paste-v" class="oe_highlight"/>
                        <button name="ship_recreate" string="Recreate Procurement" states="shipping_except" icon="gtk-redo" class="oe_highlight"/>
                        <button name="ship_corrected" string="Procurement Corrected" states="shipping_except" icon="gtk-paste-v" class="oe_highlight"/>
                        <button name="manual_invoice" states="manual" string="Create Invoice" icon="gtk-new" class="oe_highlight"/>
                        <button name="ship_cancel" string="Cancel Folio" states="shipping_except" icon="gtk-cancel" class="oe_highlight oe_highlight" />
                        <button name="action_cancel_draft" states="cancel" string="Set to Draft" type="object" icon="gtk-file" class="oe_highlight"/>
                        <button name="action_cancel" string="Cancel Folio" states="manual,progress" type="object" icon="gtk-cancel" class="oe_highlight"/>
                        <button name="cancel" string="Cancel Folio" states="draft" icon="gtk-cancel" class="oe_highlight"/>
                        <button name="invoice_cancel" string="Cancel Folio" states="invoice_except" icon="gtk-cancel" class="oe_highlight"/>
                        <button name="action_view_delivery" string="View Delivery Order" type="object" class="oe_highlight"/>
                        <field name="state" select="2" widget="statusbar" statusbar_visible="draft,sent,invoiced,done"/>
                    </header>
                    <sheet>
                        <div class="oe_right oe_button_box">
                            <button name="go_to_currency_exchange" string="Money Exchange" icon="fa-refresh" class="oe_stat_button" type="object"/> 
                        </div>
                        <label string="Folio Number"/>
                        <h1>
                            <field name="name" colspan="4"/>
                        </h1>
                        <group colspan="4" col="4">
                            <field name="date_order"/>
                            <field name="warehouse_id" string="Branch"/>
                            <field name="invoiced"/>
                            <field name="rental_invoice_id" states='progress,done,cancel' readonly="1"/>
                        </group>
                        <notebook colspan="4">
                            <page string="Folio">
                                <group colspan="4" col="4">
                                    <field name="partner_id"  string="Customer Name" required="1"/>
                                    <field name="partner_invoice_id"  domain="[('parent_id','=',partner_id)]"/>
                                    <field name="pricelist_id"  domain="[('type','=','sale')]" />
                                    <field name="project_id"/>
                                    <field name="partner_shipping_id" domain="[('parent_id','=',partner_id)]" />
                                </group>
                                <newline/>
                                <group colspan="4" col="4">
                                    <field name="checkin_date"/> 
                                    <field name="checkout_date"/>
                                    <field name="duration"/>
                                </group>
                                <separator string="Unit Lines" colspan="4"/>
                                <field name="unit_lines"  colspan="4" string="Unit Line"  nolabel="1"  context="{'checkin':checkin_date,'checkout':checkout_date}">
                                    <form string="Unit Line">
                                        <notebook>
                                            <page string="Folio Line">
                                                <group>
                                                    <field name="checkin_date" />
                                                    <field name="checkout_date" />
                                                    <separator string="Automatic Declaration" colspan="4"/>
                                                    <field name="product_uom_qty" context="{'partner_id':parent.partner_id,'quantity':product_uom_qty,'pricelist':parent.pricelist_id,'uom':product_uom}" invisible="1" on_change="product_id_change(parent.pricelist_id,product_id,product_uom_qty,product_uom,product_uos_qty,product_uos,name,parent.partner_id, False, False, parent.date_order)"/>
                                                    <field name="product_uom" string="Rent(UOM)" on_change="product_uom_change(parent.pricelist_id,product_id,product_uom_qty,product_uom,product_uos_qty,product_uos,name,parent.partner_id, False, False, parent.date_order)"/>
                                                    <field name="product_id" context="{'partner_id':parent.partner_id,'quantity':product_uom_qty,'pricelist':parent.pricelist_id,'uom':product_uom}" colspan="4" select="1" domain="[('isvehicle','=',True)]" string="Unit No" on_change="product_id_change(parent.pricelist_id,product_id,product_uom_qty,product_uom,product_uos_qty,product_uos,name,parent.partner_id, False, True, parent.date_order)"/>
                                                </group>
                                                <separator string="Manual Description" colspan="4" />
                                                <field name="name" colspan="4" select="2" placeholder="---Description---"/>
                                                <group>
                                                    <field name="price_unit" select="2" string="Rent"/>
                                                    <field name="discount"/>
                                                    <newline/>
                                                    <field name="tax_id" colspan="4" nolabel="1"/>
                                                    <separator string="States" colspan="4"/>
                                                    <field name="state" select="2"/>
                                                    <field name="invoiced" select="2"/>
                                                </group>
                                            </page>
                                            <page string="Extra Info">
                                                <group>
                                                    <field name="product_uos_qty"/>
                                                    <field name="product_uos"  />
                                                    <field name="address_allotment_id" select="2"/>
                                                </group>
                                            </page>
                                            <page string="History">
                                                <separator string="Invoice Lines" colspan="4"/>
                                                <field name="invoice_lines" colspan="4" nolabel="1"/>
                                            </page>
                                        </notebook>
                                    </form>
                                    <tree string = "Unit Line">
                                        <field name="name"/>
                                        <field name="checkin_date"/>
                                        <field name="checkout_date"/>
                                        <field name="product_id" string="Unit No"/>
                                        <field name="product_uom" string="Rent(UOM)"/>
                                        <field name="price_unit" string="Rent"/>
                                        <field name="price_subtotal"/>
                                        <field name="state"/>
                                    </tree>
                                </field>
                                
                            
                                <group colspan="2" class="oe_subtotal_footer oe_right">
                                    <field name="amount_untaxed" sum="Untaxed amount" widget='monetary' />
                                    <field name="amount_tax" widget='monetary'/>
                                    <div class="oe_subtotal_footer_separator oe_inline">
                                        <label for="amount_total" />
                                        <button name="button_dummy" string="Compute" states="draft" type="object" icon="terp-sale" class="oe_highlight"/>
                                    </div>
                                    <field name="amount_total" nolabel="1" sum="Total amount" widget='monetary'/>
                                </group>
                                <div class="oe_clear"/>
                            </page>
                            <page string="Other data">
                                <group>
                                    <field name="user_id"/>
                                    <field name="order_policy" invisible="1"/>
                                    <field name="rental_policy" attrs="{'readonly':[('state','not in',('draft'))]}"/>
                                    <field name="client_order_ref" />   
                                </group>
                            </page>
                            <page string="History">
                                 <separator string="Related invoices" colspan="4"/>
                                 <field name="invoice_ids" colspan="4" nolabel="1"/>
                            </page>
                            <page string="Foreign Exchange">
                                <separator string="Foreign Exchange" colspan="4"/>
                                <field name="currrency_ids" colspan="4" nolabel="1"> 
                                    <tree>
                                        <field name="name"/>
                                        <field name="today_date"/>
                                        <field name="type"/>
                                        <field name="in_amount"/>
                                        <field name="input_curr"/>
                                        <field name="total" sum="Total Amount"/>
                                        <field name="out_curr"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_carrent_folio_tree_view">
            <field name="name">dtbs.carrent.folio.tree</field>
            <field name="model">dtbs.carrent.folio</field>
            <field name="arch" type="xml">
                <tree string="Folio" colors="blue:state == 'draft';gray:state == 'done'">
                    <field name="checkin_date" />
                    <field name="checkout_date" />
                    <field name="name"/>
                    <field name="partner_id"  select="1"/>
                    <field name="date_order" select="1"/>
                    <field name="state"/>
                    <field name="amount_total" sum="Total amount"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_carrent_folio_calendar_view">
            <field name="name">Folios Calendar</field>
            <field name="model">dtbs.carrent.folio</field>
            <field name="arch" type="xml">
                <calendar string="Folios" date_start="checkin_date" color="user_id" date_stop="checkout_date">
                    <field name="name"/>
                    <field name="partner_id" />
                    <field name="duration"/>
                </calendar>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_carrent_folio_search_view">
            <field name="name">dtbs.carrent.folio.search</field>
            <field name="model">dtbs.carrent.folio</field>
            <field name="arch" type="xml">
                <search string="Tables Detail">
                    <field name="partner_id" />
                    <field name="name"/>
                    <filter string="Current Booking" domain="[('checkout_date','&gt;=',datetime.datetime.now().replace(hour=0, minute=0, second=0)),('checkin_date','&lt;=',datetime.datetime.now().replace(hour=23, minute=59, second=59))]" help="Current Booking"/>
                    <group expand="0" string="Group By">
                        <filter string="Order By Month" domain="[]" context="{'group_by':'date_order'}"/>
                        <filter name="partner_id" string="Customer" icon="terp-stock_symbol-selection" context="{'group_by':'partner_id'}" />
                    </group>
                </search>
            </field>
        </record>

        <record id="dtbs_carrent_folio_graph_view" model="ir.ui.view">
            <field name="name">dtbs.carrent.folio.graph</field>
            <field name="model">dtbs.carrent.folio</field>
            <field name="arch" type="xml">
                <graph type="bar">
                    <field name="date_order" type="row"/>
                    <field name="amount_total" type="measure"/>
                </graph>
            </field>
        </record>

        <record model="ir.actions.act_window" id="dtbs_folio_list_action">
            <field name="name">Folio</field>
            <field name="res_model">dtbs.carrent.folio</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
        </record>

        <menuitem id="gen_folio_menu" name="Generate Folio" parent="folio_menu" 
                  sequence="101"
                  action="dtbs_folio_list_action"/>


        <!--================ CURRENCY ============================== -->

        <record model="ir.ui.view" id="dtbs_carrent_currency_exchange_form_view">
            <field name="name">dtbs.carrent.currency.exchange.form</field>
            <field name="model">currency.exchange</field>
            <field name="arch" type="xml">
                <form string=" Currency Exchange" >
                    <header>
                        <button name="cur_confirm" string="Done" states='draft' icon="gtk-ok"/>
                        <button name="%(report_carrent_currency)d" states='done' type="action" string="Print" class = "oe_highlight"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title ">
                            <label for="name" string="Name" />
                            <h1>
                                <field name="name" select="1"/>
                            </h1>
                        </div>
                        <separator string="Details"/><newline/>
                        <group colspan="2" col="4">
                            <field name="today_date"/><newline/>
                        </group>
                        <group colspan="2" col="4">
                            <field name="folio_no" required="1"/>
                            <field name="customer_name" required="1"/>
                            <field name="unit_number" required="1"/>
                            <field name="rental_id"/>
                            <field name="type"/>
                        </group>
                        <separator string="Currency Exchange"/><newline/>
                        <group colspan="2" col="4">
                            <field name="input_curr" />
                            <field name="in_amount" select="1" widget="monetary" options="{'currency_field': 'input_curr'}"/>
                            <field name="out_curr"/>
                            <field name="rate"/>
                        </group>
                        <group colspan="2" col="4">
                            <field name="out_amount" widget="monetary" options="{'currency_field': 'out_curr'}"/><newline/>
                            <field name="tax" style="width:15%%;"/>
                        </group>
                        <separator string="Total Amount"/><newline/>
                        <h1>
                            <field name="total" widget="monetary" options="{'currency_field': 'out_curr'}"/>
                        </h1>
                        <group colspan="2" col="4"> 
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="dtbs_carrent_currency_exchange_tree_view">
            <field name="name">dtbs.carrent.currency.exchange.tree</field>
            <field name="model">currency.exchange</field>
            <field name="arch" type="xml">
                <tree string=" Currency Exchange">
                    <field name="name"/>
                    <field name="today_date"/>
                    <field name="customer_name"/>
                    <field name="total" sum="Total"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="dtbs_carrent_currency_exchange_list_action">
            <field name="name">Currency Exchange</field>
            <field name="res_model">currency.exchange</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="curr_exchange_menu" name="Currency Exchange" parent="config_menu"
                  sequence="703" 
                  action="dtbs_carrent_currency_exchange_list_action"/>

    </data>
</openerp>